{% extends 'base.html' %}
{% block title %}Comprá tus pasajes{% endblock %}

{% block hero %}
<div class="card">
  <div class="tabs">
    <button class="tab active">Comprá</button>
    <a class="tab" href="/reservas/mias/">Mis viajes</a>
    <a class="tab" href="#">Check-in</a>
    <a class="tab" href="#">Estado de vuelo</a>
  </div>
  <form method="get" style="padding:1rem">
    <div class="grid cols-4">
      <div>
        <label class="label">Origen</label>
        <input class="input" type="text" name="origen" placeholder="Ej: COR" value="{{ request.GET.origen }}">
      </div>
      <div>
        <label class="label">Destino</label>
        <input class="input" type="text" name="destino" placeholder="Ej: EZE" value="{{ request.GET.destino }}">
      </div>
      <div>
        <label class="label">Fecha</label>
        <input class="input" type="date" name="fecha" value="{{ request.GET.fecha }}">
      </div>
      <div style="align-self:end">
        <button class="btn" type="submit">Buscar vuelos</button>
      </div>
    </div>
  </form>
</div>
{% endblock %}

{% block content %}
<h2 style="margin:.5rem 0 1rem">Promociones</h2>
<div class="grid cols-3">
  {% for p in promos %}
    <div class="card promo">
      <div>
        <div style="font-weight:800">{{ p.titulo }}</div>
        <small>{{ p.detalle }}</small>
      </div>
      <a class="btn" href="{{ p.cta }}">Ver</a>
    </div>
  {% endfor %}
</div>

<h2 style="margin:1.5rem 0 .75rem">Destinos destacados</h2>
<div class="grid cols-4">
  {% for d in destinos %}
    <div class="card dest-card">
      <div class="dest-code">{{ d.codigo }}</div>
      <div style="font-weight:700">{{ d.nombre }}</div>
      <small>{{ d.desc }}</small>
      <a class="btn" href="?origen=&destino={{ d.codigo }}">Ver vuelos</a>
    </div>
  {% endfor %}
</div>

<h2 style="margin:1.5rem 0 .75rem">Resultados</h2>
<div class="grid">
  {% for f in resultados %}
    <article class="card" style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <div style="font-weight:700">{{ f.origen }} → {{ f.destino }}</div>
        <small>{{ f.fecha_salida|date:'d/m H:i' }} — {{ f.fecha_llegada|date:'H:i' }} • {{ f.duracion }}</small>
      </div>
      <div style="text-align:right">
        <div style="font-weight:800">${{ f.precio_base }}</div>
        <a class="btn" href="{% url 'web:seat_map' f.pk %}">Elegir asiento</a>
      </div>
    </article>
  {% empty %}
    <p>Usá el buscador para ver vuelos disponibles.</p>
  {% endfor %}
</div>
{% endblock %}
